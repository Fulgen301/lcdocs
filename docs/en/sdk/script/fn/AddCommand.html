<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="../../../doku.css">
<title>AddCommand</title>
<?php 
  $g_page_language = 'english';
  require_once('../../../../webnotes/core/api.php');
  pwn_head();
?><script type="text/javascript">
  function switchLanguage() {
    var loc = window.location.href;
    if (loc.match(/\/en\//)) loc = loc.replace(/\/en\//, "/de/");
    else loc = loc.replace(/\/de\//, "/en/");
    window.location = loc;
  }
</script>
</head>
<body>
<ul class="nav">
<li class="fineprint">Clonk Developer Mode Documentation</li>
<li class="switchlang"><a href="javascript:switchLanguage()"><img src="/deco/dco_de_sml.gif" alt="German" border="0"></a></li>
<li><a href="../../../sdk/index.html">Introduction</a></li>
<li><a href="../../../content.html">Contents</a></li>
<li><a href="../../../search.php">Search</a></li>
<li><a href="../../../sdk/console.html">Engine</a></li>
<li><a href="../../../sdk/cmdline.html">Command Line</a></li>
<li><a href="../../../sdk/files.html">Game Data</a></li>
<li><a href="../../../sdk/script/index.html">Script</a></li>
</ul>
<h1 id="AddCommand">AddCommand</h1>
<div class="text">
<b>Category: </b>Objects
    / Commands<br><b>Since engine version: </b>4.6.5.0 CP
        (extended in 4.9.1.0 GWE)
      
        (extended in 4.9.5.0 CE)
      </div>
<h2>Description</h2>
<div class="text">Adds a command to the top of the command stack of an object (also see <a href="../../../sdk/script/fn/AppendCommand.html">AppendCommand</a>). This command will be executed first, then the object will continue with the existing commands. If the command stack is empty, AddCommand does the same as  <a href="../../../sdk/script/fn/SetCommand.html">SetCommand</a>.<br>For the list of commands see <a href="../../../sdk/script/fn/SetCommand.html">SetCommand</a>
</div>
<h2>Syntax</h2>
<div class="text fnsyntax">
<span class="type">bool</span> AddCommand
      (<span class="type">object</span> pObj, <span class="type">string</span> szCommand, <span class="type">object</span> pTarget, <span class="type">int</span> iX, <span class="type">int</span> iY, <span class="type">object</span> pTarget2, <span class="type">int</span> iInterval, <span class="type">any</span> Data, <span class="type">int</span> iRetries, <span class="type">int</span> iBaseMode);
    </div>
<h2>Parameters</h2>
<dl>
<dt>pObj: </dt>
<dd><div class="text">Object for which the command is given.</div></dd>
<dt>szCommand: </dt>
<dd><div class="text">Command name (as string). See the table below</div></dd>
<dt>pTarget: </dt>
<dd><div class="text">
    [opt]
  target object for the command</div></dd>
<dt>iX: </dt>
<dd><div class="text">
    [opt]
  X target coordinate</div></dd>
<dt>iY: </dt>
<dd><div class="text">
    [opt]
  Y target coordinate</div></dd>
<dt>pTarget2: </dt>
<dd><div class="text">
    [opt]
  secondary target object</div></dd>
<dt>iInterval: </dt>
<dd><div class="text">
    [opt]
  Time (in ticks or frames) until the command is automatically aborted. Execution will continue with the next command in the stack.</div></dd>
<dt>Data: </dt>
<dd><div class="text">
    [opt]
  additional data for the command</div></dd>
<dt>iRetries: </dt>
<dd><div class="text">
    [opt]
  Number of retries if the command fails, until the command fails completely.</div></dd>
<dt>iBaseMode: </dt>
<dd><div class="text">
    [opt]
  Determines the behaviour if the command fails.<br><br><table>
<thead><tr>
<th>iBaseMode</th>
<th>Name</th>
<th>Description</th>
<th>Failure messages and CallFailed calls</th>
<th>Next command</th>
</tr></thead>
<tbody>
<tr>
<td>0</td>
<td>C4CMD_SilentSub</td>
<td>Silent command</td>
<td>Only if this is the last command</td>
<td>Fails</td>
</tr>
<tr class="dark">
<td>3</td>
<td>C4CMD_Sub</td>
<td>Command</td>
<td>If the next command has no retries left or this is the last command</td>
<td>Fails</td>
</tr>
<tr>
<td>2</td>
<td>C4CMD_SilentBase</td>
<td>Silent base command</td>
<td>Never</td>
<td>Does not fail</td>
</tr>
<tr class="dark">
<td>1</td>
<td>C4CMD_Base</td>
<td>Base command</td>
<td>Always</td>
<td>Does not fail</td>
</tr>
</tbody>
</table>
</div></dd>
</dl>
<h2>Remark</h2>
<div class="text">Commands added using AddCommand are not passed to controlled vehicles (see VehicleControl).</div>
<h2>Example</h2>
      <div class="example">
        <pre class="code">Timer:
  <b>var</b> obj = <a href="../../../sdk/script/fn/FindObject.html">FindObject</a>(0, -20, -40, 40, 40, <a href="../../../sdk/script/fn/OCF_CrewMember.html">OCF_CrewMember</a>();
  <b>if</b>(obj)
    <b>if</b>(<a href="../../../sdk/script/fn/GetComDir.html">GetComDir</a>(obj) == <a href="../../../sdk/script/fn/COMD_Right.html">COMD_Right</a>())
      <a href="../../../sdk/script/fn/AddCommand.html">AddCommand</a>(obj, <i class="string">"Jump"</i>);
  <b>return</b>();</pre>
        <div class="text">If called from an object on the ground, this timer script makes any clonk passing the object from left to right jump. To do this, crew member objects are searched above the object. If one is found and he is moving from left to right (ComDir), he is given a 'Jump' command. Notice that this does not affect the previously set commands of the clonk - after completing the jump command, the clonk will continue with his previous commands. Using this script, you could e.g. ensure that clonks will always jump a given gap in the landscape.</div>
      </div>
    <div class="text">
<b>See also: </b><a href="../../../sdk/script/fn/AppendCommand.html">AppendCommand</a>, <a href="../../../sdk/script/fn/FinishCommand.html">FinishCommand</a>, <a href="../../../sdk/script/fn/GetCommand.html">GetCommand</a>, <a href="../../../sdk/script/fn/PlayerObjectCommand.html">PlayerObjectCommand</a>, <a href="../../../sdk/script/fn/SetCommand.html">SetCommand</a>
</div>
<div class="author">PeterW, November 2001</div>
<div class="author">Günther, Januar 2005</div>
<?php 
  pwn_body(basename (dirname(__FILE__)) . basename(__FILE__,".html"), $_SERVER['SCRIPT_NAME']);
?><ul class="nav">
<li class="fineprint">Clonk Developer Mode Documentation</li>
<li class="switchlang"><a href="javascript:switchLanguage()"><img src="/deco/dco_de_sml.gif" alt="German" border="0"></a></li>
<li><a href="../../../sdk/index.html">Introduction</a></li>
<li><a href="../../../content.html">Contents</a></li>
<li><a href="../../../search.php">Search</a></li>
<li><a href="../../../sdk/console.html">Engine</a></li>
<li><a href="../../../sdk/cmdline.html">Command Line</a></li>
<li><a href="../../../sdk/files.html">Game Data</a></li>
<li><a href="../../../sdk/script/index.html">Script</a></li>
</ul>
</body>
</html>
