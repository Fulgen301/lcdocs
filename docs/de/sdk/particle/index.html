<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="../../doku.css">
<title>Partikel</title>
<?php 
  $g_page_language = 'german';
  require_once('../../../webnotes/core/api.php');
  pwn_head();
?><script type="text/javascript">
  function switchLanguage() {
    var loc = window.location.href;
    if (loc.match(/\/en\//)) loc = loc.replace(/\/en\//, "/de/");
    else loc = loc.replace(/\/de\//, "/en/");
    window.location = loc;
  }
</script>
</head>
<body>
<ul class="nav">
<li class="fineprint">Clonk Entwicklermodus Dokumentation</li>
<li class="switchlang"><a href="javascript:switchLanguage()"><img src="/deco/dco_en_sml.gif" alt="English" border="0"></a></li>
<li><a href="../../sdk/index.html">Einleitung</a></li>
<li><a href="../../content.html">Inhalt</a></li>
<li><a href="../../search.php">Suche</a></li>
<li><a href="../../sdk/console.html">Engine</a></li>
<li><a href="../../sdk/cmdline.html">Kommandozeile</a></li>
<li><a href="../../sdk/files.html">Spieldaten</a></li>
<li><a href="../../sdk/script/index.html">Script</a></li>
</ul>


<h1 id="Partikel">Partikel</h1>

	<div class="text">Partikel sind abgespeckte Objekte, die im Netzwerk nicht synchronisationsrelevant sind. Das heißt einerseits, dass man Partikel relativ problemlos in größeren Mengen erstellen kann, um interessante Effekte zu erzielen. Andererseits existieren nur sehr wenige Möglichkeiten, un das Verhalten von Partikeln zu steuern. Wenn die Möglichkeiten von Partikeln also für einen Effekt nicht ausreichen, sollten stattdessen reguläre Objekte verwenden, mit denen sich alle durch Partikel darstellbaren Effekte auch erzielen lassen.</div>
	<div class="text">Wenn ein Partikel in einer c4d-Datei definiert ist, wird ein ebenfalls in dieser Gruppendatei vorhandenes Objekt nicht geladen. Im veralteten Grafiksystem konnte man so ein alternatives Objekt anbieten, das im neuen Grafiksystem nicht geladen wird.</div>
	<div class="text">Partikel werden nicht in Spielständen gespeichert, da sie nur für kurzzeitige Effekte gedacht sind.</div>
	
	<h2 id="PartikelKomponentenC4D">Partikel-Komponenten (C4D)</h2>
	<dl>
<dt>
<img src="../../images/icon_text.gif" width="16" height="16">Particle.txt</dt>
<dd>
			<div class="text">Partikeleigenschaften.</div>
		</dd>
<dt id="Graphicspng">
<img src="../../images/icon_image.gif" width="16" height="16">Graphics.png</dt>
<dd>
			<div class="text">Partikelgrafik.</div>
			<div class="text">Zusätzlich dazu sind natürlich auch alle von <a href="../../sdk/definition/index.html">Objektdefinitionen</a> bekannten Elemente für das Frontend verfügbar (also z.B. Title.bmp, DescDE/US.txt, etc.)</div>
		</dd>
</dl>
	
	<h2 id="Particletxt">Particle.txt</h2>
	<div class="text">In dieser Datei werden - analog zur <a href="../../sdk/definition/defcore.html">DefCore.txt</a> bei <a href="../../sdk/definition/index.html">Objektdefinitionen</a> - die Eigenschaften des Partikeltyps beschrieben.</div>
	<div class="text"><table>
<caption id="SektionDefCore">Sektion [Particle]</caption>
<thead><tr>
<th>Wert</th>
<th>Datentyp</th>
<th>Beschreibung</th>
</tr></thead>
<tbody>
<tr>
<td>Name</td>
<td>Zeichenfolge (max. 30)</td>
<td>Name des Partikeltyps. Dieser Name dient zugleich zur Referenzierung in Scripten. Für Mehrsprachigkeit im Frontend sollte die Names.txt benutzt werden.</td>
</tr>
<tr class="dark">
<td>MaxCount</td>
<td>Integer</td>
<td>Maximale Instanzzahl für diesen Partikeltyp. Siehe <a href="#maxcount">Mengenkontrolle</a>.</td>
</tr>
<tr>
<td>MinLifetime</td>
<td>Integer</td>
<td>Nur für Rauchpartikel: Untere Grenze für die Lebensdauer, die nach Zufall zwischen MinLifetime und MaxLifetime gesetzt wird.</td>
</tr>
<tr class="dark">
<td>MaxLifetime</td>
<td>Integer</td>
<td>Nur für Rauchpartikel: Obere Grenze für die Lebensdauer, die nach Zufall zwischen MinLifetime und MaxLifetime gesetzt wird.</td>
</tr>
<tr>
<td>InitFn</td>
<td>Zeichenfolge (max. 30)</td>
<td>Identifikator für die Funktion, die zur Initialisierung des Partikels verwendet wird. Für gültige Funktionen siehe Sektion <a href="#funcs">Partikelfunktionen</a>.</td>
</tr>
<tr class="dark">
<td>ExecFn</td>
<td>Zeichenfolge (max. 30)</td>
<td>Identifikator für die Funktion, die jedes Frame zur Ausführung des Partikels verwendet wird. Für gültige Funktionen siehe Sektion <a href="#funcs">Partikelfunktionen</a>.</td>
</tr>
<tr>
<td>DrawFn</td>
<td>Zeichenfolge (max. 30)</td>
<td>Identifikator für die Funktion, die zum Zeichnen des Partikels verwendet wird. Für gültige Funktionen siehe Sektion <a href="#drawfuncs">Zeichenfunktionen</a>.</td>
</tr>
<tr class="dark">
<td>CollisionFn</td>
<td>Zeichenfolge (max. 30)</td>
<td>Identifikator für die Funktion, die Kollision des Partikels mit der Landschaft aufgerufen wird. Siehe auch <a href="#collision">Kollisionsabfrage</a>
</td>
</tr>
<tr>
<td>Face</td>
<td>6 Integer</td>
<td>Zielrechteck für die Grafik in der Graphics.png. Siehe <a href="#face">Partikelgrafik</a>.</td>
</tr>
<tr class="dark">
<td>YOff</td>
<td>Integer</td>
<td>Obere Grenze für diesen Partikeltyp. An dieser Stelle werden die Partikel abgeschnitten, als wäre die Landschaft schon dort zu Ende. Nur StdExec.</td>
</tr>
<tr>
<td>Delay</td>
<td>Integer</td>
<td>Wartezeit zwischen den Animationsphasen. Bei Delay=0 wird eine Zufallsphase dauerhaft benutzt.</td>
</tr>
<tr class="dark">
<td>Repeats</td>
<td>Integer</td>
<td>Anzahl der Animationswiederholungen, bis sich das Partikel zerstört.</td>
</tr>
<tr>
<td>Reverse</td>
<td>Integer</td>
<td>0 oder 1. Bei 1 wird jede zweite Animation rückwärts abgespielt.</td>
</tr>
<tr class="dark">
<td>FadeOutLen</td>
<td>Integer</td>
<td>Falls angegeben, wird diese Anzahl der Animationsphasen von hinten abgenommen und für eine Endanimation reserviert, die nach Repeats Abläufen der Standardanimation ausgeführt wird.</td>
</tr>
<tr>
<td>FadeOutDelay</td>
<td>Integer</td>
<td>Wartezeit zwischen zwei in FadeOutLen angegebenen Animationsphasen.</td>
</tr>
<tr class="dark">
<td>RByV</td>
<td>Integer</td>
<td>0 bis 3. 0 für keine Partikel-Drehung. Bei 1 dreht sich das Partikel nach Bewegungsrichtung; vorne ist dabei oben. Bei 2 dienen die Geschwindigkeitparameter nur der Ausrichtung; das Partikel bewegt sich nicht. Bei 3 dreht sich das Partikel zufällig (ab 4.9.8.0).</td>
</tr>
<tr>
<td>GravityAcc</td>
<td>Integer</td>
<td>Gravitationsauswirkung. Bei 0 wird das Partikel gar nicht von der Gravitation beschleunigt, bei 100 normal. Negative Werte sind ebenfalls möglich.</td>
</tr>
<tr class="dark">
<td>WindDrift</td>
<td>Integer</td>
<td>Abtrieb durch Wind. Wie die gleichnamige Materialeigenschaft. Ab CR 4.9.8.4.</td>
</tr>
<tr>
<td>VertexCount</td>
<td>Integer</td>
<td>0 oder 1. Bei 1 wird eine <a href="#collision">Kollisionsabfrage</a> durchgeführt.</td>
</tr>
<tr class="dark">
<td>VertexY</td>
<td>Integer</td>
<td>Prozentualer Wert fürs Y-Offset des Abfragepunktes für Kollisionen mit der Landschaft. Siehe auch <a href="#collision">Kollisionsabfrage</a>.</td>
</tr>
<tr>
<td>Additive</td>
<td>Integer</td>
<td>0 oder 1. Bei 1 wird das Partikel additiv gezeichnet.</td>
</tr>
<tr class="dark">
<td>AlphaFade</td>
<td>Integer</td>
<td>0 bis 40. Ausfaden pro Frame. Wenn das Partikel vollends ausgefadet ist, verschwindet es.</td>
</tr>
<tr>
<td>Parallaxity</td>
<td>2 Integer</td>
<td>Parallaxität in X- und in Y-Richtung. 0 ist fest mit dem Bildschirm; 100 ist Standard (fest mit der Landschaft).</td>
</tr>
<tr class="dark">
<td>Attach</td>
<td>Integer</td>
<td>0 oder 1. Bei 1 bewegt sich das Partikel bei angegebenem Zielobjekt relativ zu diesem. Ab 4.95.4.</td>
</tr>
</tbody>
</table></div>
	
	<h2 id="attributes">Eigenschaften</h2>
	<div class="text">Jedes Partikel hat eine Position (x, y), Impulse horizontal (xdir) und vertikal (ydir), sowie eine Lebenszeit (life) und zwei Extraparameter (a und b). Diese werden von den <a href="#funcs">Partikelfunktionen</a> verwaltet, und können bei der Erzeugung im Script nur mit Startwerten versehen werden. Für die Bedeutung der Attribute im Einzelnen siehe <a href="#funcs">Partikelfunktionen</a> und <a href="#drawfuncs">Zeichenfunktionen</a>.</div>
	
	<h2 id="face">Grafik</h2>
	<div class="text">Die Koordinaten für das Zielrechteck der Grafik in die Graphics.png sind vergleichbar mit Face in der <a href="../../sdk/definition/actmap.html">ActMap.txt</a>. Die geben nur die erste Animationsphase an, und alle weiteren Phasen sollten rechts (Bei Rauch auch unterhalb) davon liegen; die Animationslänge wird automatisch aus der Größe der Grafik ermittelt. Für das Grafikoffset sollte normalerweise die halbe Objektgröße angegeben werden, da das Standardoffset 0/0 bedeuten würde, dass das die Grafik rechts unterhalb der eigentlichen Partikelposition gezeichnet wird.</div>
	<div class="text">Wenn für Delay 0 angegeben ist, wird bei der Initialisierung eine zufällige Animationsphase ausgesucht, und beibehalten. Das Partikel existiert dann, bis es aus der Landschaft geflogen ist.</div>
	
	<h2 id="maxcount">Mengenkontrolle</h2>
	<div class="text">Für jedes Partikel wird eine Maximalzahl angegeben, die nach der vom Spieler in den Grafikoptionen angegebene Effektmenge noch angepasst werden kann. Sobald mehr als die Hälfte dieser Anzahl vorhanden ist, werden schon nach dem Zufallsprinzip einige Partikel nicht erstellt, so dass die Zahl der neu erzeugten Partikel mit Zunahme zur Maximalmenge schrumpft, und der übergang nicht zu hart ist, wenn die Partikelmenge an ihre Grenzen stößt. Wenn es wichtig ist, dass ein Partikel garantiert erzeugt wird, sollte in jedem Fall stattdessen ein Objekt benutzt werden, da Partikel auch nach dem Speichern verschwinden.</div>
	
	<h2 id="collision">Kollisionsabfrage</h2>
	<div class="text">Partikel können Kollisionsabfragen mit der Landschaft durchführen. Diese sind jedoch nicht sehr genau; schnelle Partikel können also durch dünne Materialschichten hindurchfliegen. Wenn das nicht akzeptabel ist, müssen Objekte benutzt werden.</div>
	<div class="text">Kollisionsabfragen werden nur bei StdExec durchgeführt, also nicht bei Rauchpartikeln. Für gültige Funktionen siehe Sektion <a href="#funcs">Partikelfunktionen</a>. Die Abfrage wird nur bei angegebenem VertexCount und an der Objektmitte durchgeführt. Der Abfragepunkt kann vertikal mit VertexY verschoben werden. Die angegebenen Koordinaten sind dabei prozentual zur Partikelgröße, das heißt VertexY=100 würde am unteren Rand des Partikels prüfen. Die in Face angegebene Größe der eigentlichen Grafik spielt dabei keine Rolle.</div>
	
	<h2 id="funcs">Partikelfunktionen</h2>
	<div class="text">Das Verhalten von Partikeln kann durch Angabe von Partikelfunktionen gesteuert werden. Diese werden zur Initialisierung, jedes Frame und bei <a href="#collision">Kollision</a> mit der Landschaft ausgeführt.</div>

	<dl>
<dt id="stdexec">StdExec</dt>
<dd><div class="text">Standardfunktion für ExecFn für fast alle Partikel. Das Partikel führt eine durch Face, Delay, Repeats, Reverse, FadeOutLen und FadeOutDelay definierte Animation aus, und wird dann zerstört. Dabei steht der Extraparameter a für die Größe der Grafik in Zehntelpixeln. b gibt eine Farbmodulation an; bei b=0 wird gar nicht moduliert. Sowohl aa als auch b werden von dieser Funktion nicht verändert und behalten somit ihre bei der <a href="#control">Erschaffung</a> angegebenen Werte. Ferner bewegt sich das Partikel nach xdir und ydir, wobei sich ydir bei angegebenem GravityAcc je nach Gravitation erhöhen oder verringern kann.</div></dd>
<dt id="stdinit">StdInit</dt>
<dd><div class="text">Standardfunktion, die für InitFn zusammen mit StdExec verwendet werden sollte.</div></dd>
<dt id="bounce">Bounce</dt>
<dd><div class="text">Kollisionsfunktion: Das Partikel kehrt seine Richtung komplett um.</div></dd>
<dt id="bouncey">BounceY</dt>
<dd><div class="text">Kollisionsfunktion: Das Partikel kehrt nur die vertikale Geschwindigkeit um.</div></dd>
<dt id="stop">Stop</dt>
<dd><div class="text">Kollisionsfunktion: Das Partikel hält an.</div></dd>
<dt id="die">Die</dt>
<dd><div class="text">Kollisionsfunktion: Das Partikel wird sofort zerstört.</div></dd>
<dt id="smokeexec">SmokeExec</dt>
<dd><div class="text">Hardgecodete Lösung für ExecFn für Rauch. a ist wieder die Rauchgröße; b die Farbmodulation. Der Rauch muss 4x4 Grafiken in der Graphics.png definiert haben, von denen die unterste rechte nur sehr selten benutzt wird. Die anderen werden gleichmäßig ausgewählt. Der Rauch steigt immer gleichmäßig auf und hält an, wenn er mit der Oberkante die Landschaft kollidiert. Wenn die Lebenszeit life abgelaufen ist, fadet der Rauch aus, in dem sich die Alphakomponente von b erhöht, bis sie 255 ist und das Partikel entfernt wird.</div></dd>
<dt id="smokeinit">SmokeInit</dt>
<dd><div class="text">Funktion für InitFn, die zusammen mit ExecFn=SmokeExec benutzt werden sollte.</div></dd>
</dl>
	
	<h2 id="drawfuncs">Zeichenfunktionen</h2>
	<div class="text">Funktionen, die DrawFn zugewiesen werden können.</div>
		
	<dl>
<dt id="drawstd">Std</dt>
<dd><div class="text">Standardfunktion für fast alle Fälle außer Rauch. Das Partikel wird an x/y in der Größe a/5 x a/5 gezeichnet, und mit b farbmoduliert.</div></dd>
<dt id="drawsmoke">Smoke</dt>
<dd><div class="text">Zeichenfunktion für Rauch. Sollte zusammen mit SmokeInit und SmokeExec verwendet werden.</div></dd>
</dl>
	
	<h2 id="control">Kontrolle</h2>
	<div class="text">Die externe Kontrolle von Partikeln beschränkt sich auf wenige Funktionen zur Erzeugung, Gesamtverschiebung und Gesamtzerstörung. Das muss so sein, da Partikel nicht syncrelevant sind, und damit so gut wie gar nicht vom Script aus abfragbar sein können (ansonsten würden unterschiedliche Effektmengen im Netzwerk zu Desyncs führen). Partikel werden mit <a href="../../sdk/script/fn/CreateParticle.html">CreateParticle</a> erschaffen.</div>


<div class="author">Sven2, April 2002</div>

<?php 
  pwn_body(basename (dirname(__FILE__)) . basename(__FILE__,".html"), $_SERVER['SCRIPT_NAME']);
?><ul class="nav">
<li class="fineprint">Clonk Entwicklermodus Dokumentation</li>
<li class="switchlang"><a href="javascript:switchLanguage()"><img src="/deco/dco_en_sml.gif" alt="English" border="0"></a></li>
<li><a href="../../sdk/index.html">Einleitung</a></li>
<li><a href="../../content.html">Inhalt</a></li>
<li><a href="../../search.php">Suche</a></li>
<li><a href="../../sdk/console.html">Engine</a></li>
<li><a href="../../sdk/cmdline.html">Kommandozeile</a></li>
<li><a href="../../sdk/files.html">Spieldaten</a></li>
<li><a href="../../sdk/script/index.html">Script</a></li>
</ul>
</body>
</html>
